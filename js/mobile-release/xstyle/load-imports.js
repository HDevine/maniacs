//>>built
define("xstyle/load-imports",[],function(){function q(k,a){if(!a||0<a.indexOf(":")||"/"==a.charAt(0))return a;var l;for(a=((k||location.toString()).replace(/[^\/]*$/,"")+a).replace(/\/\.\//g,"/");l!=a;)l=a,a=a.replace(/\/[^\/]+\/\.\.\//g,"/");return a}function m(){if("undefined"!==typeof XMLHttpRequest)m=function(){return new XMLHttpRequest};else for(var k=m=function(){throw Error("getXhr(): XMLHttpRequest not available");};0<(void 0).length&&m===k;)(function(a){try{new ActiveXObject(a),m=function(){return new ActiveXObject(a)}}catch(l){}})((void 0).shift());
return m()}function v(k,a,l){var d=m();d.open("GET",k,!0);d.onreadystatechange=function(k){4===d.readyState&&(400>d.status?a(d.responseText):l(Error("fetchText() failed. status: "+d.statusText)))};d.send(null)}var r={},w={"dom-deep-import":!document.createStyleSheet};return function(k,a){function l(){--loadingCount||(d(t),a&&a(t))}function d(b){for(var h="",e=!b.disabled&&(b.imports||b.rules||b.cssRules),g=0;g<e.length;g++){var c=e[g];c.href&&(h+=d(c.styleSheet||c))}return b.source=h+b.localSource}
function m(b,h){var e=q(h,b.correctHref||b.href);b.addRule||(b.addRule=function(b,a,c){return this.insertRule(b+"{"+a+"}",0<=c?c:this.cssRules.length)});b.deleteRule||(b.deleteRule=b.removeRule);var g=e&&r[e];if(g){var c;if(g!=b){var a=b.parentStyleSheet,f=g.ownerElement;(f.compareDocumentPosition?2!=f.compareDocumentPosition(k):f.sourceIndex<=k.sourceIndex)?c=b:(c=g,g=r[e]=b);c.addRule=function(b,a,c){g.addRule(b,a,-1<c?c:-1)};c.deleteRule=function(b){g.deleteRule(b)};var d=c.ownerNode||!a&&c.owningElement;
if(d)d.parentNode.removeChild(d);else if(c.disabled=!0,"cssText"in c)c.cssText="";else if(d=c.ownerRule)try{for(var a=d.parentStyleSheet,n=a.cssRules,f=0;f<n.length;f++)if(n[f]==d){a.deleteRule(f);break}return!0}catch(x){}}}if(c!=b){e&&(r[e]=b,b.ownerElement=k,loadingCount++,v(e,function(a){b.localSource=a;l()}));a=b.rules||b.cssRules;for(f=0;f<a.length;f++)n=a[f],n.selectorText&&"x-"==n.selectorText.substring(0,2)&&(b.needsParsing=!0);c=b.imports||a;for(f=0;f<c.length;f++)n=c[f],n.href&&(a=b,a=n.styleSheet||
n,m(a,e)&&f--,a.needsParsing&&(b.needsParsing=!0))}}var t=k.sheet||k.styleSheet;loadingCount=1;if(!w["dom-deep-import"]){var u=function(b,a){var e=[];b.cssText.replace(/@import url\( ([^ ]+) \)/g,function(b,c){e.push(q(a,c))});return e},p=function(){var a,h=k.styleSheet;if(!h.processed){var e=h.correctHref=q(location.toString(),h.href);h.computedUrls||(h.computedUrls=u(h,e));for(e=0;e<h.imports.length;e++){var g=h.imports[e];if(!g.cssText&&!g.imports.length){setTimeout(p,50);return}for(var c=g.correctHref=
h.computedUrls[e],c=u(g,c),d=0;d<g.imports.length;d++){var f=g.imports[d];if(!f.correctHref){a=!0;k.onload=p;var l=c[d]||g.href;h.computedUrls.splice(e,0,l);try{h.addImport(l,e++)}catch(n){}f.correctHref=l}}}a?setTimeout(p,50):(h.processed=!0,m(h))}};p();return l()}m(t);l()}});
//# sourceMappingURL=load-imports.js.map