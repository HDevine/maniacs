//>>built
define("dojo-smore/QueryRead",["dojo/_base/lang","dojo/_base/declare","dojo/request","dojo/store/util/QueryResults"],function(d,e,f,g){return e(null,{url:"",idProperty:"id",totalProperty:"total",itemsProperty:"items",startParam:"start",countParam:"count",sortParam:"sort",processSort:function(a){for(var b="",c=0,h=a.length;c<h;c++)b+=(a[c].descending?"-":"")+a[c].attribute+",";return b.slice(0,-1)},processQuery:function(a,b){var c=d.mixin({},a);b&&("undefined"!==typeof b.start&&(c[this.startParam]=
b.start),"undefined"!==typeof b.count&&(c[this.countParam]=b.count),b.sort&&(c[this.sortParam]=this.processSort(b.sort)));return{query:c}},processRequest:function(a){var b=this,c=a.then(function(a){return"undefined"!==typeof a.length?a:a[b.itemsProperty]});return d.delegate(c,{total:a.response.then(function(a){if("undefined"!==typeof a.data.length){var c=a.getHeader("Content-Range"),d=c?c.lastIndexOf("/"):-1;return-1<d?+c.slice(d+1):a.data.length}return a.data[b.totalProperty]})})},constructor:function(a){d.mixin(this,
a)},getIdentity:function(a){return a[this.idProperty]},get:function(a){var b={};b[this.idProperty]=a;return this.query(b,{start:0,count:1}).then(function(a){return a[0]||null})},query:function(a,b){return new g(this.processRequest(f(this.url,d.mixin({handleAs:"json"},this.processQuery(a,b)))))}})});
//# sourceMappingURL=QueryRead.js.map